import { AnimatePresence, motion, Variants } from "framer-motion";
import { useTurboSite } from "../SiteSwitcher";
import cn from "classnames";
import styles from "../header-logo.module.css";

type LogoProps = {
  className?: string;
  height?: number;
};

const LEFT_PADDING = 8;
const RIGHT_PADDING = 12;
// The width of the logo + wordmark. This does not include the "invisible" padding.
const VISUAL_WIDTH = 112;

const TurboAnimated = ({ height = 32, className = "" }: LogoProps) => {
  const site = useTurboSite();

  return (
    <svg
      className={className}
      width={LEFT_PADDING + VISUAL_WIDTH}
      height={height}
      viewBox={`0 0 ${LEFT_PADDING + VISUAL_WIDTH} 28`}
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <title>Turborepo</title>

      <defs>
        <linearGradient
          id="logo-ring-gradient"
          x1="15.0234"
          y1="4.00556"
          x2="3.64419"
          y2="15.3847"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="#0096FF" />
          <stop offset="1" stopColor="#FF1E56" />
        </linearGradient>
        <linearGradient id="gradient">
          <stop offset="0%" stopColor="#000000" />
          <stop offset="25%" stopColor="#ffffff" />
          <stop offset="85%" stopColor="#ffffff" />
          <stop offset="100%" stopColor="#000000" />
        </linearGradient>
        <mask id="logo-mask">
          <rect
            x="0"
            y="0"
            width={`${26 + LEFT_PADDING + RIGHT_PADDING}`}
            height="26"
            fill="url(#gradient)"
            transform="translate(-8,0)"
          />
        </mask>
      </defs>

      <g mask="url(#logo-mask)" transform={`translate(${LEFT_PADDING},0)`}>
        <AnimatePresence mode="sync" initial={false}>
          {site === "repo" || site === undefined ? (
            <motion.g
              key="turborepo"
              variants={variants}
              initial="hidden"
              animate="visible"
              exit="hidden"
              custom={24}
              className="z-0 relative"
            >

              <svg  width="55" height="30"  viewBox="100 10 550 400"  xmlns="http://www.w3.org/2000/svg">
                <rect x="1" y="1" width="394" height="394" rx="197"  stroke="url(#paint0_linear_63_385)" stroke-width="2"/>
                <path d="M197.977 227.981L197.977 306.25L127.001 232.578L162.489 161.208L197.977 227.981Z" fill="#FFD774"/>
                <path d="M200.422 227.981L200.422 306.25L271.398 232.578L235.91 161.208L200.422 227.981Z" fill="#FCCC55"/>
                <path d="M234.686 146.651L199.309 213.898L199.309 79.4032L234.686 146.651Z" fill="#FFE6A7"/>
                <path d="M163.934 146.651L199.31 213.898L199.31 79.4032L163.934 146.651Z" fill="#FFF3D7"/>
              </svg>

            </motion.g>
          ) : (
            <motion.g
              key="turbopack"
              variants={variants}
              initial="hidden"
              animate="visible"
              exit="hidden"
              custom={-24}
              className="z-0 relative"
            >
              <svg width="55" height="30"  viewBox="100 10 550 400" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_63_387)">
                  <path d="M74 1H322C362.317 1 395 33.6832 395 74V322C395 362.317 362.317 395 322 395H74C33.6832 395 1 362.317 1 322V74C1 33.6832 33.6832 1 74 1Z"  stroke="url(#paint0_linear_63_387)" stroke-width="2"/>
                  <path d="M197.978 227.981V306.251L127.002 232.579L162.49 161.209L197.978 227.981Z" fill="#FFD774"/>
                  <path d="M200.422 227.981V306.251L271.398 232.579L235.91 161.209L200.422 227.981Z" fill="#FCCC55"/>
                  <path d="M234.686 146.651L199.309 213.898V79.4033L234.686 146.651Z" fill="#FFE6A7"/>
                  <path d="M163.934 146.651L199.31 213.898V79.4033L163.934 146.651Z" fill="#FFF3D7"/>
                </g>

              </svg>

            </motion.g>
          )}
        </AnimatePresence>
      </g>

      {/* Turbo Wordmark */}
      <g
        className={cn("z-10 relative", styles.desktopLogo)}
        transform={`translate(${LEFT_PADDING},0)`}
      >
        <svg  viewBox="50 -10 100 80" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M127.584 9.01543V41.3788H143.915V51.0458H117.376V0.489258L127.584 9.01543ZM22.1464 51.8864C18.2235 51.8864 14.6009 50.9258 11.2785 49.0044C7.95612 47.0429 5.31421 44.401 3.35279 41.0786C1.4314 37.7562 0.470703 34.1336 0.470703 30.2108C0.470703 26.2879 1.4314 22.6653 3.35279 19.3429C5.31421 16.0205 7.95612 13.3986 11.2785 11.4772C14.6009 9.51579 18.2235 8.53508 22.1464 8.53508C26.0692 8.53508 29.6918 9.51579 33.0143 11.4772C36.3367 13.3986 38.9585 16.0205 40.8799 19.3429C42.8414 22.6653 43.8221 26.2879 43.8221 30.2108C43.8221 34.1336 42.8414 37.7562 40.8799 41.0786C38.9585 44.401 36.3367 47.0429 33.0143 49.0044C29.6918 50.9258 26.0692 51.8864 22.1464 51.8864ZM22.1464 41.619C24.2279 41.619 26.1293 41.1187 27.8505 40.1179C29.6118 39.0772 30.9928 37.6962 31.9935 35.9749C33.0343 34.2137 33.5546 32.2923 33.5546 30.2108C33.5546 28.1293 33.0343 26.2279 31.9935 24.5066C30.9928 22.7454 29.6118 21.3443 27.8505 20.3036C26.1293 19.2628 24.2279 18.7425 22.1464 18.7425C20.0649 18.7425 18.1435 19.2628 16.3822 20.3036C14.661 21.3443 13.28 22.7454 12.2392 24.5066C11.1985 26.2279 10.6781 28.1293 10.6781 30.2108C10.6781 32.2923 11.1985 34.2137 12.2392 35.9749C13.28 37.6962 14.661 39.0772 16.3822 40.1179C18.1435 41.1187 20.0649 41.619 22.1464 41.619ZM77.0636 28.4095C78.2645 29.6103 79.2052 31.0113 79.8857 32.6125C80.5662 34.2137 80.9064 35.9149 80.9064 37.7162C80.9064 40.1179 80.326 42.3395 79.1651 44.381C78.0443 46.3825 76.5032 47.9836 74.5418 49.1845C72.6204 50.3854 70.5189 50.9858 68.2372 50.9858H58.5102V51.0458H48.3028V9.01543H67.2165C69.3781 9.01543 71.3795 9.59585 73.2208 10.7567C75.0622 11.8775 76.5232 13.3986 77.604 15.32C78.6848 17.2013 79.2252 19.2228 79.2252 21.3844C79.2252 23.9462 78.5047 26.2879 77.0636 28.4095ZM58.5102 18.6824V24.7468H67.2165C67.897 24.7468 68.4974 24.4866 69.0178 23.9662C69.5782 23.4058 69.8584 22.6853 69.8584 21.8047C69.8584 20.884 69.5782 20.1435 69.0178 19.5831C68.4974 18.9826 67.897 18.6824 67.2165 18.6824H58.5102ZM68.2372 41.3188C69.0378 41.3188 69.7383 40.9585 70.3388 40.238C70.9392 39.4775 71.2394 38.6168 71.2394 37.6562C71.2394 36.6955 70.9392 35.8548 70.3388 35.1343C69.7383 34.3738 69.0378 33.9935 68.2372 33.9935H58.5102V41.3188H68.2372ZM95.1578 41.3788V34.4138H108.249L109.808 24.7468H95.1578V18.6824L108.249 18.7425L111.309 9.01543H84.9504V51.0458H111.61L108.249 41.3788H95.1578ZM148.277 33.1829V51.0458L158.485 59.8122V20.9039H148.277V33.1829ZM148.277 18.5022H158.485V9.01543H143.915L148.277 15.32V18.5022ZM179.459 51.8864C175.256 51.8864 171.734 50.9658 168.892 49.1244C166.05 47.2431 164.028 44.7213 162.827 41.559L171.413 36.5153C172.174 38.3567 173.215 39.7176 174.536 40.5983C175.857 41.4389 177.578 41.8592 179.699 41.8592C181.221 41.8592 182.421 41.5189 183.302 40.8385C184.183 40.1179 184.623 39.3374 184.623 38.4968C184.623 37.8163 184.423 37.2559 184.023 36.8155C183.622 36.3752 182.882 35.9349 181.801 35.4946C180.76 35.0142 179.179 34.4738 177.058 33.8734C173.295 32.7926 170.273 31.2515 167.991 29.2501C165.709 27.2486 164.568 24.4266 164.568 20.7839C164.568 18.2221 165.209 16.0005 166.49 14.1191C167.771 12.1977 169.472 10.7367 171.594 9.73595C173.755 8.69519 176.057 8.17482 178.499 8.17482C181.941 8.17482 184.943 8.99541 187.505 10.6366C190.107 12.2378 192.148 14.5594 193.63 17.6016L184.863 22.7053C184.143 21.1442 183.262 20.0234 182.221 19.3429C181.221 18.6624 179.98 18.3222 178.499 18.3222C177.538 18.3222 176.677 18.5623 175.917 19.0427C175.156 19.523 174.776 20.1035 174.776 20.7839C174.776 21.3844 174.916 21.9048 175.196 22.3451C175.476 22.7454 176.077 23.1857 176.997 23.666C177.958 24.1063 179.379 24.6267 181.261 25.2272C185.344 26.4681 188.626 28.1293 191.108 30.2108C193.589 32.2522 194.83 35.2144 194.83 39.0972C194.83 41.6991 194.15 43.9607 192.789 45.8821C191.468 47.8035 189.627 49.2846 187.265 50.3253C184.943 51.3661 182.341 51.8864 179.459 51.8864ZM225.332 51.0458H238.061L211.884 29.2501L236.079 9.01543H223.11L210.261 26.9684V9.01543H200.053V51.0458H210.261V41.1387V33.1829L225.332 51.0458Z" className="dark:fill-white fill-black"/>
          <path d="M254.875 9.01502L248.871 11.4168L242.866 9.01502L248.871 6.61328L254.875 9.01502Z" fill="#FFD774"/>
          <path d="M148.297 15.3192L143.914 9.01465H158.505V18.5015H148.297V15.3192Z" fill="#FFD774" stroke="#FFD774"/>
        </svg>
        {/*<path*/}
        {/*  d="M48.2623 11.2944V8.24418H33.5623V11.2944H39.1115V21.4374H42.713V11.2944H48.2623Z"*/}
        {/*  className="dark:fill-white fill-black"*/}
        {/*/>*/}
        {/*<path*/}
        {/*  d="M56.5679 21.6396C61.0882 21.6396 63.5688 19.3427 63.5688 15.5574V8.24418H59.9673V15.2083C59.9673 17.3214 58.8648 18.5158 56.5679 18.5158C54.271 18.5158 53.1685 17.3214 53.1685 15.2083V8.24418H49.567V15.5574C49.567 19.3427 52.0476 21.6396 56.5679 21.6396Z"*/}
        {/*  className="dark:fill-white fill-black"*/}
        {/*/>*/}
        {/*<path*/}
        {/*  d="M69.0819 17.0642H72.665L75.4947 21.4374H79.6291L76.4319 16.6783C78.2326 16.0352 79.3351 14.6019 79.3351 12.6542C79.3351 9.82443 77.222 8.24418 74.0064 8.24418H65.4804V21.4374H69.0819V17.0642ZM69.0819 14.2161V11.2577H73.8226C75.0905 11.2577 75.7887 11.8089 75.7887 12.7461C75.7887 13.6281 75.0905 14.2161 73.8226 14.2161H69.0819Z"*/}
        {/*  className="dark:fill-white fill-black"*/}
        {/*/>*/}
        {/*<path*/}
        {/*  d="M81.0108 21.4374H90.4372C93.3772 21.4374 95.0677 20.0409 95.0677 17.7073C95.0677 16.1454 94.0754 15.0797 92.8994 14.6019C93.7079 14.2161 94.7002 13.2973 94.7002 11.8457C94.7002 9.51206 93.0464 8.24418 90.1248 8.24418H81.0108V21.4374ZM84.4653 13.4076V11.1658H89.7573C90.7496 11.1658 91.3008 11.5517 91.3008 12.2867C91.3008 13.0217 90.7496 13.4076 89.7573 13.4076H84.4653ZM84.4653 16.1087H90.0881C91.0619 16.1087 91.5948 16.5864 91.5948 17.3031C91.5948 18.0197 91.0619 18.4974 90.0881 18.4974H84.4653V16.1087Z"*/}
        {/*  className="dark:fill-white fill-black"*/}
        {/*/>*/}
        {/*<path*/}
        {/*  d="M103.873 8.02368C99.2612 8.02368 95.9353 10.9086 95.9353 14.8408C95.9353 18.7731 99.2612 21.6579 103.873 21.6579C108.485 21.6579 111.793 18.7731 111.793 14.8408C111.793 10.9086 108.485 8.02368 103.873 8.02368ZM103.873 11.1474C106.299 11.1474 108.118 12.5807 108.118 14.8408C108.118 17.1009 106.299 18.5342 103.873 18.5342C101.448 18.5342 99.6287 17.1009 99.6287 14.8408C99.6287 12.5807 101.448 11.1474 103.873 11.1474Z"*/}
        {/*  className="dark:fill-white fill-black"*/}
        {/*/>*/}
      </g>
    </svg>
  );
};

export default TurboAnimated;

const variants: Variants = {
  visible: {
    opacity: 1,
    x: 0,
    transition: {
      duration: 0.3,
    },
  },
  hidden: (distance) => ({
    opacity: 0,
    x: distance,
    transition: {
      duration: 0.3,
    },
  }),
};
